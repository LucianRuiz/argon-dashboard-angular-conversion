<div class="relative flex flex-col h-full min-w-0 break-words bg-white shadow-xl dark:bg-slate-850 dark:shadow-dark-xl rounded-2xl bg-clip-border">
  <!-- Header -->
  <div class="flex items-center px-6 py-4 border-b border-solid rounded-t-2xl border-b-slate-100">
    <div class="flex items-center">
      <a href="javascript:;">
        <img [src]="data.author.avatar" [alt]="data.author.name + ' profile image'" 
             class="inline-flex items-center justify-center w-12 h-12 text-base text-white transition-all duration-200 ease-in-out rounded-xl" />
      </a>
      <div class="mx-4">
        <a href="javascript:;" class="text-sm leading-normal text-slate-700 dark:text-white">{{ data.author.name }}</a>
        <small class="block text-slate-500">{{ data.timeAgo }}</small>
      </div>
    </div>
    <div class="ml-auto text-right" *ngIf="data.actionButton">
      <button 
        class="inline-block px-8 py-2 mb-0 text-xs font-bold text-center text-white uppercase align-middle transition-all ease-in bg-transparent border-0 rounded-lg shadow-md cursor-pointer hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem leading-pro bg-150 bg-x-25 bg-gradient-to-tl from-blue-500 to-violet-500"
        (click)="onActionClick()">
        <i *ngIf="data.actionButton.icon" [class]="'pr-2 ' + data.actionButton.icon + ' text-3xs'"></i>
        {{ data.actionButton.text }}
      </button>
    </div>
  </div>
  
  <!-- Content -->
  <div class="flex-auto p-6">
    <p class="mb-6 dark:text-white dark:opacity-60">{{ data.content }}</p>
    <img *ngIf="data.image" 
         [src]="data.image" 
         alt="Social post image" 
         class="h-auto max-w-full shadow-3xl rounded-xl" />
    
    <!-- Footer Stats -->
    <div class="flex flex-wrap items-center px-2 mt-6 mb-2 -mx-3">
      <div class="w-full max-w-full px-3 sm:flex-0 shrink-0 sm:w-6/12">
        <div class="flex">
          <div class="flex items-center">
            <i class="mr-1 leading-none cursor-pointer ni ni-like-2" (click)="onStatClick('like')"></i>
            <span class="mr-4 text-sm leading-normal">{{ data.stats.likes }}</span>
          </div>
          <div class="flex items-center">
            <i class="mr-1 leading-none cursor-pointer ni ni-chat-round" (click)="onStatClick('comment')"></i>
            <span class="mr-4 text-sm leading-normal">{{ data.stats.comments }}</span>
          </div>
          <div class="flex items-center">
            <i class="mr-1 leading-none cursor-pointer ni ni-curved-next" (click)="onStatClick('share')"></i>
            <span class="mr-4 text-sm leading-normal">{{ data.stats.shares }}</span>
          </div>
        </div>
      </div>
      <div class="hidden w-full max-w-full px-3 sm:flex-0 shrink-0 sm:block sm:w-6/12" *ngIf="data.followers">
        <div class="flex items-center sm:justify-end">
          <div class="flex items-center">
            <a *ngFor="let avatar of data.followers.avatars; trackBy: trackByAvatar" 
               href="javascript:;" 
               class="inline-flex items-center justify-center w-6 h-6 text-xs text-white transition-all duration-200 ease-in-out leading-inherit">
              <img [src]="avatar" alt="Follower avatar" class="w-full rounded-circle" />
            </a>
          </div>
          <small class="pl-2 font-semibold" *ngIf="data.followers.count">and {{ data.followers.count }}+ more</small>
        </div>
      </div>
      <hr class="w-full h-px max-w-full px-3 my-4 dark:bg-gradient-to-r dark:from-transparent dark:via-white dark:to-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent shrink-0" />
    </div>
    
    <!-- Comments Section -->
    <div class="mb-1" *ngIf="data.comments && data.comments.length > 0">
      <div class="flex" *ngFor="let comment of data.comments; trackBy: trackByComment" [class.mt-4]="!comment.isFirst">
        <div class="shrink-0">
          <img [src]="comment.author.avatar" [alt]="comment.author.name + ' avatar'" 
               class="inline-flex items-center justify-center w-12 h-12 text-base text-white transition-all duration-200 ease-in-out rounded-circle" />
        </div>
        <div class="ml-4 grow">
          <h5 class="mt-0 mb-2 dark:text-white">{{ comment.author.name }}</h5>
          <p class="text-sm leading-normal dark:text-white dark:opacity-60">{{ comment.text }}</p>
          <div class="flex">
            <div>
              <i class="mr-1 leading-none cursor-pointer ni ni-like-2" (click)="onCommentAction(comment.id, 'like')"></i>
            </div>
            <span class="mr-2 text-sm leading-normal">{{ comment.likes || 0 }} likes</span>
            <div>
              <i class="mr-1 leading-none cursor-pointer ni ni-curved-next" (click)="onCommentAction(comment.id, 'share')"></i>
            </div>
            <span class="mr-2 text-sm leading-normal">{{ comment.shares || 0 }} shares</span>
          </div>
        </div>
      </div>
      
      <!-- Add Comment Form -->
      <div class="flex mt-6" *ngIf="data.showCommentForm && data.currentUser">
        <div class="shrink-0">
          <img [src]="data.currentUser!.avatar" [alt]="data.currentUser!.name + ' avatar'" 
               class="inline-flex items-center justify-center w-12 h-12 mr-4 text-base text-white transition-all duration-200 ease-in-out rounded-circle" />
        </div>
        <div class="my-auto grow">
          <form (ngSubmit)="onAddComment()">
            <textarea 
              rows="1" 
              placeholder="Write your comment" 
              [(ngModel)]="newComment"
              name="comment"
              class="focus:shadow-primary-outline dark:bg-slate-850 dark:placeholder:text-white/80 dark:text-white/80 text-sm leading-5.6 ease min-h-unset block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white bg-clip-padding px-3 py-2 font-normal text-gray-700 transition placeholder:text-gray-500 focus:border-blue-500 focus:outline-none">
            </textarea>
          </form>
        </div>
      </div>
    </div>
  </div>
</div> 