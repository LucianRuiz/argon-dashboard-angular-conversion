<!-- ========================================
     NEW PRODUCT PAGE LAYOUT
     ========================================
     PÃ¡gina para crear nuevos productos con formulario multistep
     de 4 pasos: Product Info, Media, Socials y Pricing
-->

<!-- Page Layout with Sidebar -->
<div class="m-0 font-sans text-base antialiased font-normal text-left leading-default dark:bg-slate-900 bg-gray-50 text-slate-500 dark:text-white/80">
  
  <!-- Background Header Image -->
  <div class="absolute bg-y-50 w-full top-0 bg-[url('https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/profile-layout-header.jpg')] min-h-75">
    <span class="absolute top-0 left-0 w-full h-full bg-blue-500 opacity-60"></span>
  </div>
  
  <!-- Sidebar -->
  <app-sidebar *ngIf="sidebarData$ | async as sidebarData" [data]="sidebarData"></app-sidebar>

  <!-- Main Content Area -->
  <main class="relative h-full max-h-screen transition-all duration-200 ease-in-out xl:ml-68" appPerfectScrollbar>

    <!-- Profile Header Widget -->
    <ng-container *ngIf="profileHeaderData$ | async as profileHeaderData">
      <app-profile-header [data]="profileHeaderData"></app-profile-header>
    </ng-container>

    <!-- Content Container -->
    <div class="w-full px-6 -mt-4 mx-auto">
      <div class="flex flex-wrap -mx-3">
        <div class="w-full max-w-full px-3 flex-0">
          
          <!-- Form Section -->
          <app-multistep-form 
            *ngIf="multistepFormData$ | async as multistepFormData" 
            [data]="multistepFormData"
            (stepChange)="onStepChange($event)">
            <ng-container *ngIf="formData$ | async as formData">
              
              <!-- Step 1: Product Information -->
              <app-product-info-step 
                *ngIf="multistepFormData.currentStep === 'info'"
                [data]="formData.productInfo"
                (next)="onNextStep()">
              </app-product-info-step>

              <!-- Step 2: Media Upload -->
              <app-media-step 
                *ngIf="multistepFormData.currentStep === 'media'"
                [data]="formData.media"
                (prev)="onPrevStep()"
                (next)="onNextStep()">
              </app-media-step>

              <!-- Step 3: Social Media Links -->
              <app-socials-step 
                *ngIf="multistepFormData.currentStep === 'socials'"
                [data]="formData.socials"
                (prev)="onPrevStep()"
                (next)="onNextStep()">
              </app-socials-step>

              <!-- Step 4: Pricing Information -->
              <app-pricing-step 
                *ngIf="multistepFormData.currentStep === 'pricing'"
                [data]="formData.pricing"
                (prev)="onPrevStep()"
                (send)="onSendForm()">
              </app-pricing-step>

            </ng-container>
          </app-multistep-form>
        </div>
      </div>

      <!-- Footer -->
      <app-footer></app-footer>
    </div>
  </main>

  <!-- Argon Configurator -->
  <app-argon-configurator></app-argon-configurator>
</div> 