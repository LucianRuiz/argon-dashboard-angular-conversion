<!-- Page Layout with Sidebar -->
<div class="m-0 font-sans text-base antialiased font-normal text-left leading-default dark:bg-slate-900 bg-gray-50 text-slate-500 dark:text-white/80">
  
  <!-- Background Header Image -->
  <div class="absolute bg-y-50 w-full top-0 bg-[url('https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/profile-layout-header.jpg')] min-h-75">
    <span class="absolute top-0 left-0 w-full h-full bg-blue-500 opacity-60"></span>
  </div>
  
  <!-- Sidebar -->
  <app-sidebar *ngIf="sidebarData$ | async as sidebarData" [data]="sidebarData"></app-sidebar>

  <!-- Main Content Area -->
  <main class="relative h-full max-h-screen transition-all duration-200 ease-in-out xl:ml-68" appPerfectScrollbar>

    <!-- Profile Header Widget -->
    <ng-container *ngIf="profileHeaderData$ | async as profileHeaderWidget">
      <app-profile-header [data]="profileHeaderWidget"></app-profile-header>
    </ng-container>

    <!-- Chat Content -->
    <div class="w-full p-6 mx-auto">
      <div class="flex flex-wrap -mx-3">
        
        <!-- Contacts List -->
        <div class="w-full max-w-full px-3 md:w-4/12 flex-0">
          <app-chat-contacts-list 
            [contactsData]="(contactsData$ | async) ?? []"
            (contactSelect)="onContactSelect($event)">
          </app-chat-contacts-list>
        </div>

        <!-- Chat Messages and Input -->
        <div class="w-full max-w-full px-3 md:w-8/12 flex-0">
          <div class="relative flex flex-col min-w-0 mb-12 break-words bg-white border-0 max-h-70-screen lg:mb-0 bg-white/80 shadow-blur dark:bg-slate-850 dark:shadow-dark-xl rounded-2xl bg-clip-border">
            
            <!-- Chat Header -->
            <app-chat-header [chatHeaderData]="(chatHeaderData$ | async) ?? null"></app-chat-header>

            <!-- Messages Area -->
            <div class="flex-auto p-6 overflow-auto overflow-x-hidden dark:bg-slate-900" appPerfectScrollbar [updateOnChange]="messagesData$ | async" style="scrollbar-width: none; -ms-overflow-style: none;">
              <app-chat-messages [messagesData]="(messagesData$ | async) ?? []"></app-chat-messages>
            </div>

            <!-- Chat Input -->
            <div class="border-black/12.5 rounded-b-2xl border-t-0 border-solid p-6 block">
              <app-chat-input 
                [currentChatData]="(currentChatData$ | async) ?? null"
                (sendMessage)="onSendMessage($event)">
              </app-chat-input>
            </div>

          </div>
        </div>

      </div>

      <!-- Footer -->
      <app-footer></app-footer>

    </div>

  </main>

  <!-- Argon Configurator -->
  <app-argon-configurator></app-argon-configurator>

</div> 